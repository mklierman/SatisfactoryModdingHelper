<Page
    x:Class="SatisfactoryModdingHelper.Views.UPluginPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Name="Page"
    mc:Ignorable="d">

    <Grid x:Name="ContentArea" Margin="{StaticResource MediumLeftRightBottomMargin}">
        <Grid.Resources>
            <Style TargetType="TextBox">
                <Setter Property="Margin" Value="{StaticResource XXSmallTopBottomMargin}" />
                <Setter Property="MinHeight" Value="24" />
            </Style>
            <Style TargetType="CheckBox">
                <Setter Property="Margin" Value="{StaticResource XXSmallTopBottomMargin}" />
            </Style>
            <Style TargetType="TextBlock">
                <Setter Property="Margin" Value="{StaticResource SmallRightMarginXXSmallTopBottomMargin}" />
            </Style>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <ScrollViewer VerticalAlignment="Stretch" VerticalScrollBarVisibility="Auto">
            <ScrollViewer.Resources />
            <Grid Grid.Row="1" Margin="{StaticResource MediumLeftTopRightBottomMargin}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <TextBlock
                        x:Uid="JSON_FileVersion"
                        Grid.Row="0"
                        Grid.Column="0" />
                    <TextBox
                        x:Uid="JSON_FileVersion"
                        Grid.Row="0"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.FileVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_Version"
                        Grid.Row="1"
                        Grid.Column="0" />
                    <NumberBox
                        Grid.Row="1"
                        Grid.Column="1"
                        LargeChange="1"
                        SmallChange="1"
                        SpinButtonPlacementMode="Inline"
                        Text="{x:Bind ViewModel.Version, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_VersionName"
                        Grid.Row="2"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="2"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.VersionName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_SemVersion"
                        Grid.Row="3"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="3"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.SemVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_FriendlyName"
                        Grid.Row="4"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="4"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.FriendlyName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_Description"
                        Grid.Row="5"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="5"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_Category"
                        Grid.Row="6"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="6"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.Category, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_CreatedBy"
                        Grid.Row="7"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="7"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.CreatedBy, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_CreatedByURL"
                        Grid.Row="8"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="8"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.CreatedByURL, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_DocsURL"
                        Grid.Row="9"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="9"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.DocsURL, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_MarketplaceURL"
                        Grid.Row="10"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="10"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.MarketplaceURL, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_SupportURL"
                        Grid.Row="11"
                        Grid.Column="0" />
                    <TextBox
                        Grid.Row="11"
                        Grid.Column="1"
                        Text="{x:Bind ViewModel.SupportURL, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <CheckBox
                        x:Uid="JSON_CanContainContent"
                        Grid.Row="12"
                        Grid.Column="1"
                        IsChecked="{x:Bind ViewModel.CanContainContent, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <CheckBox
                        x:Uid="JSON_IsBetaVersion"
                        Grid.Row="13"
                        Grid.Column="1"
                        IsChecked="{x:Bind ViewModel.IsBetaVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <CheckBox
                        x:Uid="JSON_IsExperimentalVersion"
                        Grid.Row="14"
                        Grid.Column="1"
                        IsChecked="{x:Bind ViewModel.IsExperimentalVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <CheckBox
                        x:Uid="JSON_Installed"
                        Grid.Row="15"
                        Grid.Column="1"
                        IsChecked="{x:Bind ViewModel.Installed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <CheckBox
                        x:Uid="JSON_AnyRemoteVersion"
                        Grid.Row="16"
                        Grid.Column="1"
                        IsChecked="{x:Bind ViewModel.AcceptsAnyRemoteVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    <TextBlock
                        x:Uid="JSON_Plugins"
                        Grid.Row="17"
                        Grid.Column="0"
                        VerticalAlignment="Top" />
                    <Border
                        Grid.Row="18"
                        Grid.Column="0"
                        Grid.ColumnSpan="2"
                        Margin="{StaticResource MediumBottomMargin}"
                        Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                        BorderBrush="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                        BorderThickness="5"
                        CornerRadius="4">
                        <controls:ListDetailsView ItemsSource="{x:Bind ViewModel.Plugins, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{x:Bind ViewModel.SelectedDepPlugin, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <controls:ListDetailsView.ListCommandBar>
                                <CommandBar>
                                    <AppBarButton
                                        Command="{Binding Path=ViewModel.AddPlugin, ElementName=Page}"
                                        Icon="Add"
                                        Label="Add Plugin" />
                                </CommandBar>
                            </controls:ListDetailsView.ListCommandBar>
                            <controls:ListDetailsView.ItemTemplate>
                                <DataTemplate>
                                    <Grid
                                        Background="{ThemeResource SystemFillColorSolidNeutralBackground}"
                                        BorderBrush="{ThemeResource SystemFillColorSolidNeutralBackground}"
                                        BorderThickness="4"
                                        CornerRadius="3">
                                        <TextBlock Margin="{StaticResource XXSmallLeftTopRightBottomMargin}" Text="{Binding Name}" />
                                    </Grid>
                                </DataTemplate>
                            </controls:ListDetailsView.ItemTemplate>
                            <controls:ListDetailsView.DetailsTemplate>
                                <DataTemplate>
                                    <Grid Margin="10">
                                        <Grid.Resources>
                                            <Style TargetType="TextBox">
                                                <Setter Property="Margin" Value="{StaticResource XXSmallTopBottomMargin}" />
                                                <Setter Property="MinHeight" Value="24" />
                                            </Style>
                                            <Style TargetType="CheckBox">
                                                <Setter Property="Margin" Value="{StaticResource XXSmallTopBottomMargin}" />
                                            </Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="Margin" Value="{StaticResource SmallRightMarginXXSmallTopBottomMargin}" />
                                            </Style>
                                        </Grid.Resources>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="8" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <TextBlock
                                                Grid.Row="0"
                                                Grid.Column="0"
                                                Text="Name" />
                                            <TextBox
                                                Grid.Row="0"
                                                Grid.Column="1"
                                                Text="{Binding Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            <TextBlock
                                                Grid.Row="1"
                                                Grid.Column="0"
                                                Text="SemVersion" />
                                            <TextBox
                                                Grid.Row="1"
                                                Grid.Column="1"
                                                Text="{Binding SemVersion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                            <CheckBox
                                                Grid.Row="2"
                                                Grid.Column="1"
                                                Content="Enabled"
                                                IsChecked="{Binding Enabled, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        </Grid>
                                    </Grid>
                                </DataTemplate>
                            </controls:ListDetailsView.DetailsTemplate>
                            <controls:ListDetailsView.DetailsCommandBar>
                                <CommandBar>
                                    <AppBarButton
                                        Command="{Binding Path=ViewModel.RemovePlugin, ElementName=Page}"
                                        Icon="Delete"
                                        Label="Delete Plugin" />
                                </CommandBar>
                            </controls:ListDetailsView.DetailsCommandBar>
                        </controls:ListDetailsView>
                    </Border>
                    <TextBlock
                        x:Uid="JSON_Modules"
                        Grid.Row="20"
                        Grid.Column="0" />
                    <ItemsControl
                        Grid.Row="21"
                        Grid.Column="1"
                        Margin="{StaticResource MediumLeftMargin}"
                        ItemsSource="{x:Bind ViewModel.Modules}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid>
                                    <Grid.Resources>
                                        <Style TargetType="TextBox">
                                            <Setter Property="Margin" Value="{StaticResource XXSmallTopBottomMargin}" />
                                            <Setter Property="MinHeight" Value="24" />
                                        </Style>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="Margin" Value="{StaticResource XXSmallTopBottomMargin}" />
                                        </Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Margin" Value="{StaticResource SmallRightMarginXXSmallTopBottomMargin}" />
                                        </Style>
                                    </Grid.Resources>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="8" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="10" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            Grid.Column="0"
                                            Text="Name" />
                                        <TextBox
                                            Grid.Row="0"
                                            Grid.Column="2"
                                            Text="{Binding Name}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            Grid.Column="0"
                                            Text="Type" />
                                        <TextBox
                                            Grid.Row="1"
                                            Grid.Column="2"
                                            Text="{Binding Type}" />
                                        <TextBlock
                                            Grid.Row="2"
                                            Grid.Column="0"
                                            Text="Loading Phase" />
                                        <TextBox
                                            Grid.Row="2"
                                            Grid.Column="2"
                                            Text="{Binding LoadingPhase}" />
                                        <Button
                                            Grid.Row="3"
                                            Grid.ColumnSpan="3"
                                            Command="{Binding Path=ViewModel.RemoveModule, ElementName=Page}"
                                            CommandParameter="{Binding Name}"
                                            Content="Remove Above Module" />
                                    </Grid>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>
            </Grid>
        </ScrollViewer>
        <StackPanel
            Grid.Row="1"
            Margin="{StaticResource SmallTopBottomMargin}"
            HorizontalAlignment="Center"
            Orientation="Horizontal"
            Visibility="{x:Bind ViewModel.SaveCancelVisibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <Button
                x:Name="SaveChangesButton"
                Margin="{StaticResource SmallLeftRightMargin}"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Command="{x:Bind ViewModel.SaveUPlugin}"
                Style="{StaticResource AccentButtonStyle}">
                <StackPanel Orientation="Horizontal">
                    <FontIcon
                        VerticalAlignment="Center"
                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                        FontSize="24"
                        Glyph="&#xe74e;" />
                    <TextBlock
                        Margin="{StaticResource SmallLeftMargin}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Text="Save Changes" />
                </StackPanel>
            </Button>
            <Button
                x:Name="CancelChangesButton"
                Margin="{StaticResource SmallLeftRightMargin}"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Command="{x:Bind ViewModel.CancelUPluginChanges}"
                Style="{StaticResource AccentButtonStyle}">
                <StackPanel Orientation="Horizontal">
                    <FontIcon
                        VerticalAlignment="Center"
                        FontFamily="{StaticResource SymbolThemeFontFamily}"
                        FontSize="24"
                        Glyph="&#xe711;" />
                    <TextBlock
                        Margin="{StaticResource SmallLeftMargin}"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Text="Cancel Changes" />
                </StackPanel>
            </Button>
        </StackPanel>
    </Grid>
</Page>
